<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>File Upload to Custom API</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 50px;
      background: #f8f9fa;
      color: #333;
    }
    h2 {
      color: #007BFF;
    }
    label {
      font-weight: bold;
    }
    input[type="text"], input[type="file"] {
      margin: 10px 0;
      padding: 8px;
      width: 300px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      padding: 8px 16px;
      background: #007BFF;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
    #response {
      margin-top: 20px;
      font-size: 14px;
      color: green;
      white-space: pre-wrap;
    }
    #error {
      margin-top: 20px;
      font-size: 14px;
      color: red;
    }
  </style>
</head>
<body>
  <h2>Upload File to Your API</h2>

  <!-- API URL input -->
  <label for="apiUrl">Enter API URL:</label><br>
  <input type="text" id="apiUrl" placeholder="http://xxxx.ngrok-free.app/upload">
  <br><br>

  <!-- File input -->
  <input type="file" id="fileInput"><br><br>

  <!-- Upload button -->
  <button onclick="uploadImage()">Upload</button>

  <!-- Response messages -->
  <p id="response"></p>
  <p id="error"></p>

  <script>
    async function uploadImage() {
      const apiUrl = document.getElementById("apiUrl").value.trim();
      const file = document.getElementById("fileInput").files[0];
      const responseBox = document.getElementById("response");
      const errorBox = document.getElementById("error");

      responseBox.innerText = "";
      errorBox.innerText = "";

      if (!apiUrl) {
        errorBox.innerText = "⚠️ Please enter API URL!";
        return;
      }
      if (!file) {
        errorBox.innerText = "⚠️ Please select a file!";
        return;
      }

      const formData = new FormData();
      formData.append("file", file);

      try {
        const res = await fetch(apiUrl, { method: "POST", body: formData });
        const data = await res.json();

        if (res.ok) {
          responseBox.innerText = "✅ Server Response:\n" + JSON.stringify(data, null, 2);
        } else {
          errorBox.innerText = "❌ Error: " + (data.error || "Upload failed");
        }
      } catch (err) {
        errorBox.innerText = "❌ Request failed: " + err.message;
      }
    }
  </script>
</body>
</html>
